# スタートアップが爆速開発するためのTips

<small>ヒカラボ / 2014-10-09</small>

<small>Howtelevision, Inc. / 株式会社ハウテレビジョン</small>
<small>Yoshiyuki Onishi</small>

---

## 自己紹介

- 大西 貴之 / Yoshiyuki Onishi
- 創業からハウテレビジョンに関わり、2010年11月に参画
- 開発/技術、その周辺業務全般

---

## よく使っている言語/環境

- PHP(CakePHP) / Perl
- MySQL
- Server-side
    - dev
    - ops
- Vim
- Ubuntu

---
## みなさんにおききします
いま働かれている会社は
- スタートアップ
- 大手企業
- その他、フリーランス

---

# 巷ですでに認知されているスタートアップはすでにサービスが軌道に乗り始めているものが多い

---

## 最初は何もない
- 会社の知名度もない
- サービスの知名度もない
- 売上もない
- 金もない
- 広告主もいない
- ユーザもいない

---

## 黎明期
2010年3月　ひっそりと産声をあげる

- 非エンジニアの代表が一人で WordPress をレンタルサーバに設置
    - 適当な無料のテーマ
- さくらのレンタルサーバ ビジネス 2500円/月
    - PHP(CGIモード)
- non programing
- ユーザが求めているであろう情報を投稿していった。
- 次第にユーザが増えてきた
- デザイナー津田がリモートでデザイン

// 画像を入れる

---

## 方針
- アプリケーション
    - 当たるかどうかもわからない。
    - とにかく動作するものをリリースしていく
- インフラ
    - 管理対象を必要最低限に保ち、極力増やさない

---

## 2010年8月ぐらいまで
- エンジニア 0.2 / 他でフルタイム勤務
- デザイナー 0.5 / 岐阜県からリモート

---

## 2010年9月　会員制立ち上げ期
- 開発期間1ヶ月
- メインプログラマは、昨日までデザイナー
- セキュリティ怖い
- ユーザ管理/認証まわりは、WordPress のユーザ管理機構にのっかることに

---

## 手法
- WordPress 固定ページを作成し、各ページにテンプレートファイルを関連付け
- テンプレートファイルに、ベタりとPHPで記述
    - (例) mypage.php
- 使いまわす関数は function.php に

---

## レンタルサーバ ビジネス -> ビジネスプロ
- 会員登録機能/ログインのため、独自SSL が必要に
- 2500円/月 -> 4500円/月

// サーバ構成図

---

## なんとか完成し、2010年10月1日リリース！
- 順調に登録されているのをみてほっと胸をなでおろす
- マイページがあるだけで会員向けの機能など何一つなかった
- これまでのリピーターからの期待は高かった！
- 会員登録が日々増えていく
- ユーザからの期待は高い
- 使ってもらえる何かをはやく提供しなければ

---

## この頃の開発環境
- 開発環境: レンタルサーバ上に staging 環境
    - http://xxx.xxx.jp/staging/
- デプロイ: SCP でファイルアップロード
- テスト: 目視でかくにん！よかった
- ソースコード管理: (お察しください)
- メール: Google Apps
- 社内コミュニケーション: Yammer

---

## 2011年1月　共有レンタルサーバからVPS への移行
PVが増え、パフォーマンスが低下してきた
さくらVPS512を契約

---

# MVC による分離などなかった

---

# WordPress には詳しくなったが...

---

# WordPress のカスタマイズを続けることに限界を感じ始める

---

# デザインとロジックの分離もされていない

---

# MVCフレームワークを使いたい

---

## 2011年3月
まずは、社内向けの管理画面で試験導入してみる

---

## 2011年6月　CakePHP を導入
- ただ、これまでに開発したページをすべて書き直している時間などない
- フロントに Nginx を置いてリバースプロキシ
- これまで開発したコードベースについてはそのまま活かす
- 今後新たに開発する機能やページについては、CakePHP で実装する
- この頃は v1.3

---

## 2011年6月　法人クライアント向け入稿管理システムの新設
- サブドメインで別アプリケーション
- CakePHP1.3

---

## フレームワークのアップデート
- 2011年10月　CakePHP2 がリリースされた
- 2011/10 〜 2012.2　1.x で実装されたアプリケーションをメンテし続ける日々

// 図

---

## 2012年2月　CakePHP2 で書き始める
- フロントのリバースプロキシの下にぶらさがる
// 図

---

## 2012年1月
- 学生インターンが増え始める　2〜4名
- ようやくソースコード管理に Git を使うように
- 開発環境: 一人1つ VPS, サブドメイン + バーチャルホストで複数のアプリ

---

## 2013年夏
- 学生インターンがまた増える　一気に7名に
- 開発環境をVPSにいちいちセットアップし、サポートするのが面倒
- Vagrant + chef で開発環境を Mac のローカルに立ち上がるように 

---

## Vagrant + chef による開発環境
- 4つのアプリがある
    - サービス、社内用管理画面、顧客向けの入稿管理システム、private API
- 4つの VM をローカルでたてる

---

##

// コード

---

# 紆余曲折あり...

---

# 
- 2014.2〜2014.4　開発者が一気に増える
- 2名 -> 8名

---

# ご清聴ありがとうございました

<small>次は弊社　秋山　より</small>
